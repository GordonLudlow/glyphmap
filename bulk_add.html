<!DOCTYPE html>
<html>
<head>
<title>Bellevue Portals</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
</style>

<script type="text/javascript">
var portal = [
[47.615073,-122.217261],
[47.617134,-122.211359],
[47.617511,-122.207727],
[47.626384,-122.206923],
[47.626619,-122.206279],
[47.631882,-122.208883],
[47.631868,-122.208563],
[47.631771,-122.208595],
[47.631679,-122.208507],
[47.635549,-122.207186],
[47.642216,-122.199333],
[47.643703,-122.19648],
[47.644423,-122.195543],
[47.660673,-122.164296],
[47.660456,-122.153331],
[47.657134,-122.143459],
[47.65465,-122.143491],
[47.652666,-122.143464],
[47.648453,-122.143319],
[47.647675,-122.1433],
[47.647335,-122.144233],
[47.647654,-122.145343],
[47.64144,-122.147191],
[47.640365,-122.1475],
[47.634957,-122.14436],
[47.631788,-122.143756],
[47.631661,-122.143336],
[47.630465,-122.143351],
[47.628948,-122.14586],
[47.629342,-122.147368],
[47.628835,-122.149133],
[47.627663,-122.138967],
[47.627729,-122.138168],
[47.630686,-122.133439],
[47.631344,-122.131974],
[47.638622,-122.119104],
[47.641011,-122.11443],
[47.645472,-122.113217],
[47.636716,-122.115505],
[47.636737,-122.1158],
[47.636274,-122.115591],
[47.635841,-122.115791],
[47.634989,-122.115087],
[47.63137,-122.112241],
[47.623911,-122.091115],
[47.621509,-122.098898],
[47.597497,-122.11367],
[47.595314,-122.111383],
[47.592218,-122.112275],
[47.573847,-122.111206],
[47.571311,-122.106063],
[47.55219,-122.105203],
[47.54403,-122.10036],
[47.544192,-122.103462],
[47.545061,-122.115722],
[47.538429,-122.117225],
[47.537071,-122.112492],
[47.541424,-122.119596],
[47.541891,-122.120336],
[47.540434,-122.124744],
[47.543541,-122.130447],
[47.545438,-122.147129],
[47.54898,-122.156188],
[47.549504,-122.15704],
[47.550055,-122.15718],
[47.550445,-122.158543],
[47.5499,-122.15945],
[47.5505,-122.163326],
[47.549048,-122.169032],
[47.54104,-122.174449],
[47.545832,-122.185197],
[47.549502,-122.185691],
[47.557151,-122.189296],
[47.557361,-122.190727],
[47.563972,-122.187283],
[47.564418,-122.188376],
[47.565227,-122.187764],
[47.566147,-122.19062],
[47.565613,-122.190998],
[47.565697,-122.191399],
[47.565455,-122.19142],
[47.571183,-122.181748],
[47.57395,-122.187879],
[47.574446,-122.187867],
[47.578875,-122.197425],
[47.579282,-122.19688],
[47.579458,-122.196615],
[47.579443,-122.195103],
[47.580386,-122.195008],
[47.580364,-122.196427],
[47.58593,-122.195266],
[47.5869,-122.196755],
[47.587992,-122.197419],
[47.588037,-122.20463],
[47.59318,-122.20122],
[47.596335,-122.197899],
[47.599743,-122.210451],
[47.599833,-122.210704],
[47.600078,-122.210194],
[47.600148,-122.20865],
[47.607437,-122.205553],
[47.608864,-122.206946],
[47.609576,-122.208679],
[47.610378,-122.209981],
[47.61115,-122.211181],
[47.611295,-122.211449],
[47.611406,-122.211701],
[47.616978,-122.220693],
[47.619544,-122.205543],
[47.65479,-122.164465],
[47.647667,-122.16465],
[47.646726,-122.164572],
[47.646238,-122.164367],
[47.646097,-122.164623],
[47.640332,-122.162001],
[47.637134,-122.162021],
[47.633299,-122.179197],
[47.632681,-122.17944],
[47.641241,-122.192079],
[47.641089,-122.191139],
[47.640713,-122.191503],
[47.549254,-122.180358],
[47.548946,-122.18011],
[47.548158,-122.180487],
[47.546982,-122.174044],
[47.550846,-122.163615],
[47.551984,-122.164725],
[47.551339,-122.175626],
[47.551916,-122.17772],
[47.551997,-122.178961],
[47.550701,-122.179546],
[47.553574,-122.166074],
[47.553721,-122.166414],
[47.554109,-122.166998],
[47.555149,-122.167418],
[47.565202,-122.170876],
[47.565074,-122.170334],
[47.567324,-122.169927],
[47.566674,-122.166767],
[47.566314,-122.165523],
[47.567558,-122.168374],
[47.567765,-122.167755],
[47.568108,-122.168616],
[47.568051,-122.167777],
[47.568514,-122.16826],
[47.568568,-122.169326],
[47.568826,-122.168825],
[47.56904,-122.168698],
[47.56847,-122.166205],
[47.568513,-122.165397],
[47.568928,-122.16846],
[47.568826,-122.168825]
];

var portalCount = portal.length;


function upload() {   

    document.getElementById('status').innerHTML = 'Uploading...'; 

    var data = '[';
    var leadingComma = '';
    for (var p=0; p < portal.length; p++) {
        data += leadingComma + '[' + String(portal[p][0]) + ',' + String(portal[p][1]) + ']';
        leadingComma = ',';
    }
    data += ']';

    saveRequest=new XMLHttpRequest();
    saveRequest.open('POST', 'http://runmap-140616.appspot.com/');
    saveRequest.setRequestHeader('Content-Type', 'application/json');
    saveRequest.setRequestHeader('Content-Length', data.length);
    saveRequest.onreadystatechange = function() {
        console.log("readyState = " + String(this.readyState) + ", status = " + String(this.status));
        if (this.readyState == 4) // complete 
        {
            if (this.status == 200) // OK
            {
                // Success!
                //window.location.reload(true);
                document.getElementById('status').innerHTML = 'DONE';
                document.getElementById('result').innerHTML = this.responseText;
            }
        }
    };
    saveRequest.send(data);
}



</script>
</head>

<body>
<div>
<span id=saveButton><button onclick="upload()">Upload</button></span><br/>
<span id=status> </span><br/>
<span id=result> </span>
</div>
</body>
</html>